import{r as u,j as e,Y as g,M as b,c as l,x as y,y as o,n}from"./app-BHSufI5G.js";import{H as N}from"./HomeLayout-D3dDFpaj.js";import{C as k}from"./Container-CLQvhDZq.js";import{P as v}from"./PageTitle-DAH-XYhY.js";import{u as S}from"./use-disclosure-8GjKLeip.js";import{B as P}from"./Badge-BIRI9re-.js";import{T as m}from"./Text-ClF5DP7X.js";import"./iconBase-C-ylmESj.js";import"./index-B29946aL.js";import"./AccordionChevron-Ci1cBE2N.js";import"./Menu-Dia_VYI6.js";import"./use-resolved-styles-api-C-ix6nIl.js";import"./Popover-C9BlbU81.js";import"./DirectionProvider-6MtzQ78E.js";import"./Input-Bj5l2KtT.js";const O=({auth:d,order:a,wallet:c})=>{const p=a.single_order,t=c.balance-a.total_price,[x,{open:h,close:i}]=S(!1),[f,r]=u.useState(!1),j=()=>{o.visit(`/orders/${a.id}`,{method:"patch",data:{remainingBalance:t},onProgress:()=>{r(!0)},onSuccess:()=>{r(!1),i(),n.show({color:"green",title:"Success notification",message:"Berhasil membayar pesanan!"})},onError:s=>{r(!1),i(),s.remainingBalance&&n.show({color:"red",title:"Error notification",message:s.remainingBalance})}})};return e.jsxs(N,{authenticatedUser:d.user,children:[e.jsx(g,{title:"Detail Pesanan Saya"}),e.jsx(v,{children:"Detail Pesanan"}),e.jsx(k,{children:e.jsx("div",{className:"py-4 flex justify-center",children:e.jsxs("div",{className:"py-4 px-6 rounded w-full max-w-xl bg-gray-100",children:[e.jsxs("div",{className:"border-b border-gray-400 pb-2",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Produk:"}),p.map(s=>e.jsxs("div",{className:"flex justify-between gap-6 mb-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.cart.product_size.product.name}),e.jsx(P,{color:"gray",radius:"sm",variant:"outline",size:"xs",className:"mb-1",children:s.cart.product_size.product.category.name}),e.jsxs("p",{className:"text-xs mb-1",children:["Ukuran: ",s.cart.product_size.size]}),e.jsxs("p",{children:["Rp",s.cart.product_size.product.price.toLocaleString()]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:["x ",s.cart.quantity]}),e.jsxs("p",{className:"text-primary",children:["Rp",s.cart.total_price.toLocaleString()]})]})]},s.id))]}),e.jsxs("div",{className:"py-2 border-b border-gray-400",children:[e.jsx("p",{className:"font-semibold mb-2 mt-2",children:"Alamat Pengiriman:"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:[a.address.recipient_name," | ",a.address.phone_number]}),e.jsx("p",{className:"line-clamp-2",children:a.address.address_name}),e.jsxs("p",{className:"uppercase",children:[a.address.city,", ",a.address.state,","," ",a.address.country," ",a.address.postal_code]})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Biaya Pengiriman:"}),e.jsxs("p",{className:"text-primary",children:["Rp",a.shipping_price.toLocaleString()]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between border-b border-gray-400 pb-2",children:[e.jsx("p",{className:"font-semibold mb-2 text-xl",children:"Total:"}),e.jsxs("p",{className:"text-primary text-xl font-medium",children:["Rp",a.total_price.toLocaleString()]})]}),a.is_paid?e.jsx("p",{className:"mt-4 text-green-500 font-semibold text-lg",children:"Lunas"}):e.jsxs("div",{children:[e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Saldo Saya:"}),e.jsxs("p",{className:"text-primary",children:["Rp",c.balance.toLocaleString()]})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Sisa"}),e.jsxs("p",{className:`text-lg font-medium ${t<0?"text-red-500":"text-primary"}`,children:["Rp",t.toLocaleString()]})]})]}),e.jsxs(b,{opened:x,onClose:i,title:"Konfirmasi Pembayaran",centered:!0,children:[e.jsx(m,{size:"sm",children:"Apakah Anda yakin ingin membayar pesanan ini? Setelah mengonfirmasi maka saldo Anda akan langsung dikurangi."}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(l,{onClick:j,className:"mt-4",loading:f,children:"Konfirmasi"})})]}),a.is_paid?"":e.jsxs("div",{className:"mt-4 flex gap-4",children:[e.jsx(l,{size:"md",color:"red",fullWidth:!0,onClick:()=>{y.openConfirmModal({title:"Pembatalan Pesanan",centered:!0,children:e.jsx(m,{size:"sm",children:"Apakah anda yakin ingin membatalkan pesanan ini? Setelah mengonfirmasi maka pesanan Anda akan terhapus."}),labels:{confirm:"Hapus Pesanan",cancel:"Batal"},confirmProps:{color:"red"},onCancel:()=>console.log("Cancel"),onConfirm:()=>{o.visit(`/orders/${a.id}`,{method:"delete",onSuccess:()=>{i(),n.show({color:"green",title:"Success notification",message:"Berhasil membatalkan pesanan!"})},onError:s=>{i(),s.remainingBalance&&n.show({color:"red",title:"Error notification",message:s.remainingBalance})}})}})},children:"Batalkan Pesanan"}),e.jsx(l,{size:"md",fullWidth:!0,onClick:h,children:"Bayar Sekarang"})]})]})})})]})};export{O as default};
