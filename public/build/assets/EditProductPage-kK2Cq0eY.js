import{r as u,W as S,j as e,B as L,G as I,b as o,c as P,n as U}from"./app-DmqRxiIu.js";import{D as R,P as C}from"./PageTitle-BN4IiloJ.js";import{u as D,S as N,U as _,L as G,P as T,R as r,D as m,I as z,a as E}from"./IconUpload-DJcXPDvx.js";import{I as w}from"./Image-Dibl8nEN.js";import{L as B}from"./LoadingOverlay-BIIiT7r6.js";import{T as M}from"./TextInput-CGbfz0VU.js";import{S as O}from"./Select-Db4dMEDr.js";import{N as H}from"./NumberInput-BvlVKe8s.js";import{I as A}from"./IconX-cbccF7EB.js";import{T as j}from"./Text-Dfu3fWJ2.js";import{S as K}from"./SimpleGrid-BALoqe34.js";import"./iconBase-DizHYFA0.js";import"./index-ChQUk7TW.js";import"./AccordionChevron-NDiPJtmq.js";import"./Menu-KItRysSi.js";import"./use-resolved-styles-api-BlrRsMyN.js";import"./Popover-BliU6b8N.js";import"./DirectionProvider-r1f_A9N0.js";import"./use-disclosure-C_Ssd4Ot.js";import"./get-sorted-breakpoints-DIK6QMLZ.js";import"./index-BURL4FG3.js";import"./ColorSwatch-Cjy1PkOQ.js";import"./ColorPicker-Dk9Lae66.js";import"./Input-klpkudea.js";import"./use-move-Aq8pIR0U.js";import"./clamp-DTmYCdls.js";import"./ActionIcon-ChSDut15.js";import"./createReactComponent-2jTeNtNB.js";import"./InputBase-hC2F_Sl6.js";import"./CheckIcon-DX_7BVpD.js";import"./ScrollArea-BRioxJZT.js";import"./get-base-value-JqT_q0U7.js";const ye=({product:a,selectCategoriesData:f,auth:k})=>{const[d,p]=u.useState(""),{data:n,setData:t,post:v,processing:x,errors:i,reset:l}=S({name:a.name||"",category_id:a.category_id||"",price:a.price||"",image:[],description:a.description||""});u.useEffect(()=>{p(a.category_id?{value:a.category_id,label:a.category.name}:"")},[a.category_id,a.category]);const h=n.image.map((s,c)=>{const g=URL.createObjectURL(s);return e.jsx(w,{src:g,onLoad:()=>URL.revokeObjectURL(g)},c)}),b=D({extensions:[N,_,G,T.configure({placeholder:"Masukkan deskripsi produk"})],content:n.description,onUpdate:({editor:s})=>{t("description",s.getHTML())}}),y=s=>{s.preventDefault(),v(`/dashboard/product/${a.id}`,{preserveScroll:!0,onSuccess:()=>{l("name"),l("category_id"),l("price"),l("image"),l("description"),U.show({color:"green",title:"Success notification",message:"Berhasil mengupdate produk!"})}})};return e.jsxs(R,{authenticatedUser:k.user,children:[e.jsx(C,{children:"Edit Produk"}),e.jsxs(L,{pos:"relative",children:[e.jsx(B,{visible:x,zIndex:1e3,overlayProps:{radius:"sm",blur:2}}),e.jsxs("form",{className:"flex flex-col gap-4 mt-6",onSubmit:y,children:[e.jsx(M,{placeholder:"Masukkan nama produk",label:"Nama Produk",size:"md",value:n.name,onChange:s=>t("name",s.target.value),error:i.name?i.name:!1}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(O,{label:"Kategori",size:"md",placeholder:"Pilih kategori",data:f,value:d?d.value:"",onChange:(s,c)=>{p(c),t("category_id",c.value)},error:i.category_id?i.category_id:!1}),e.jsx(H,{size:"md",label:"Harga",placeholder:"Masukkan harga produk",prefix:"Rp",allowNegative:!1,allowDecimal:!1,thousandSeparator:".",decimalSeparator:",",value:n.price,onChange:s=>t("price",parseInt(s)),error:i.price?i.price:!1})]}),e.jsxs("div",{children:[e.jsx("label",{className:" font-medium",children:"Deskripsi Produk"}),e.jsxs(r,{editor:b,children:[e.jsxs(r.Toolbar,{sticky:!0,stickyOffset:60,children:[e.jsxs(r.ControlsGroup,{children:[e.jsx(r.Bold,{}),e.jsx(r.Italic,{}),e.jsx(r.Underline,{}),e.jsx(r.Strikethrough,{}),e.jsx(r.ClearFormatting,{})]}),e.jsx(r.ControlsGroup,{children:e.jsx(r.H3,{})}),e.jsxs(r.ControlsGroup,{children:[e.jsx(r.BulletList,{}),e.jsx(r.OrderedList,{})]}),e.jsxs(r.ControlsGroup,{children:[e.jsx(r.Link,{}),e.jsx(r.Unlink,{})]}),e.jsxs(r.ControlsGroup,{children:[e.jsx(r.Undo,{}),e.jsx(r.Redo,{})]})]}),e.jsx(r.Content,{})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:" font-medium",children:"Gambar Produk (Maks 5MB)"}),e.jsx(m,{onDrop:s=>t("image",s),onReject:s=>console.log("rejected files",s),maxSize:5*1024**2,accept:["image/png","image/jpeg","image/jpg"],children:e.jsxs(I,{justify:"center",gap:"xl",mih:220,style:{pointerEvents:"none"},className:i.image?"border border-red-400 rounded":"",children:[e.jsx(m.Accept,{children:e.jsx(z,{style:{width:o(52),height:o(52),color:"var(--mantine-color-blue-6)"},stroke:1.5})}),e.jsx(m.Reject,{children:e.jsx(A,{style:{width:o(52),height:o(52),color:"var(--mantine-color-red-6)"},stroke:1.5})}),e.jsx(m.Idle,{children:e.jsx(E,{style:{width:o(52),height:o(52),color:i.image?"var(--mantine-color-red-6)":"var(--mantine-color-dimmed)"},stroke:1.5})}),e.jsxs("div",{children:[e.jsx(j,{size:"xl",inline:!0,c:i.image?"red":"",children:"Drag images here or click to select files"}),e.jsx(j,{size:"sm",c:i.image?"red":"dimmed",inline:!0,mt:7,children:"Attach as many files as you like, each file should not exceed 5mb"})]})]})}),e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.image}),e.jsx(K,{cols:{base:1,sm:4},mt:h.length>0?"xl":0,children:h})]}),e.jsx("div",{children:e.jsx(P,{type:"submit",disabled:!!x,children:"Tambah"})})]})]})]})};export{ye as default};
